@model LivroDetalhes

@{
    ViewData["Title"] = "Detalhes do livro " + Model.Titulo;
    Layout = "~/Views/Shared/_Layout.cshtml";
}
 
<div class="row mt-2" id="detalhes-livro" data-livro-id="@Model.Id" data-titulo="@Model.Titulo">
    <div class="col-md-3">
        <img src="@Model.Capa" style="max-width:100%" />
    </div>
    <div class="col-md-9">
        <h1>@Model.Titulo</h1>
        <div class="ator pb-2">@Model.Autores </div>
        <div class="isbn pb-2">@Model.ISBN - @Model.NumeroPagina páginas - @Model.Ano</div>
        <p>@Html.Raw(Model.Descricao)</p>
    </div> 
    <div class="col-md-12 pt-2">
        @if (Model.DisponibilizarParaTroca)
        {
            <a asp-action="DisponibilizarParaTroca" asp-controller="Livro" asp-route-id="@Model.Id" class="btn btn-outline-dark">
                Disponibilizar para troca
            </a>
        }

        @if (Model.PodeEditar)
        {
            <a asp-action="Editar" asp-controller="Livro" asp-route-id="@Model.Id" class="btn btn-outline-dark">Editar livro</a>
            <button type="button" class="btn btn-outline-danger" id="btn-deletar" data-id="@Model.Id">Deletar livro</button>
        }
    </div>
</div>

@if (Model.Usuarios.Count > 0)
{
    <div class="row">
        <div class="col-md-12">
            <h3 class="mt-3"> Esse livro está sendo oferecido por:</h3>

            <table class="table table-striped" width="100%">
                @foreach (var item in Model.Usuarios)
                {
                    <tr>
                        <td class="text-center" width="10px" valign="middle">
                            <img src="~/img/usuario/2.png" width="50" />
                        </td>
                        <td class="text-center" width="200px" valign="middle">
                            <div>@item.Nome</div>
                            <div>@item.LivrosEnviados Livros enviados</div>
                        </td>
                        <td class=" text-right " valign="middle">
                            <button type="button" class="btn btn-outline-dark">Solicitar troca</button>
                        </td>
                    </tr>
                }
            </table>
        </div>
    </div>
}

<div class="row">
    <div class="col-md-12 mt-3">
        <h3>Avaliações</h3>
    </div>
    <div class="col-md-12">
        <div class="card col-md-12 pt-3 pb-3">
            <div class="row">
                <div class="col-md-8">
                    <div>Esse livro não possui avaliações.</div>
                    <div>
                        <strong>Faça a primeira :) </strong>
                    </div>
                </div>
                <div class="col-md-4 text-right">
                    <button class="btn btn-outline-dark" id="btn-avaliar" type="button" data-loading-text="Processando, aguarde..." 
                            data-livro-id="@Model.Id">Avaliar livro</button>
                </div>
            </div>
            <div id="avaliacoes" class="hidden"></div>
        </div>

        <div></div>
        @*<ul class="list-unstyled">
            <li>
                <strong>O teclado e grande?</strong><br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras sit amet dolor nec orci laoreet 
                imperdiet finibus a urna. Quisque pretium lacinia vulputate. Nullam fermentum nec nisi ut tristique. 
                Morbi justo ipsum, commodo sed malesuada a, gravida pulvinar lacus. Fusce urna enim, fermentum sed cursus
                at, pretium vel leo. Ut condimentum diam lacus, eu porta felis consectetur pharetra. Proin posuere,
                ex eu ultrices volutpat, quam neque iaculis leo, eget molestie sem velit quis sem. Nunc mattis
                condimentum neque, nec cursus eros dignissim id. Quisque tempor leo sed leo pharetra semper.
            </li>
            <li>
                <strong>O teclado e grande?</strong><br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras sit amet dolor nec orci laoreet
                imperdiet finibus a urna. Quisque pretium lacinia vulputate. Nullam fermentum nec nisi ut tristique.
                Morbi justo ipsum, commodo sed malesuada a, gravida pulvinar lacus. Fusce urna enim, fermentum sed cursus
                at, pretium vel leo. Ut condimentum diam lacus, eu porta felis consectetur pharetra. Proin posuere,
                ex eu ultrices volutpat, quam neque iaculis leo, eget molestie sem velit quis sem. Nunc mattis
                condimentum neque, nec cursus eros dignissim id. Quisque tempor leo sed leo pharetra semper.
            </li>
        </ul>*@
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/livro/DetalhesLivro.js"></script>
    <script src="~/js/livro/AvaliadorLivro.js"></script>
    <script>
        let detalhes = new DetalhesLivro();
    </script>
    
}
